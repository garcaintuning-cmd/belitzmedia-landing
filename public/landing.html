

<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>BELITZMEDIA – Landing</title>
  <style>
    :root{
      --bg:#0A0A0A;
      --text:#ffffff;
      --muted:rgba(255,255,255,.7);
      --border:rgba(255,255,255,.12);
      --primary:#FFD400;
      --p:255,212,0;
    }
    *,*:before,*:after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:400 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    a{color:inherit;text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:0 24px}
    .texture{position:fixed;inset:0;pointer-events:none;opacity:.9;z-index:0;background:
      radial-gradient(1200px 800px at 80% -10%, rgba(255,255,255,.03), transparent 60%),
      radial-gradient(900px 600px at -10% 110%, rgba(255,255,255,.02), transparent 60%),
      repeating-linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,.02) 1px, transparent 1px, transparent 3px),
      radial-gradient(1200px 1200px at 50% 50%, rgba(255,255,255,.02), transparent 60%)}
    .spot{position:fixed;inset:0;z-index:1;pointer-events:none;mix-blend-mode:screen}
    .nav{position:relative;z-index:2;padding:16px 0}
    .nav-row{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:10px}
    .brand-spin{height:36px;width:36px;display:grid;place-items:center;overflow:hidden;border:1px solid var(--border);border-radius:12px;background:rgba(0,0,0,.4)}
    .spin{height:24px;width:24px;border:2px solid rgba(var(--p),.2);border-top-color:var(--primary);border-radius:999px;animation:spin 6s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .links{display:flex;align-items:center;gap:18px;flex-wrap:wrap}
    .nav a.link{opacity:.8}.nav a.link:hover{opacity:1}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--primary);color:var(--primary);background:transparent;padding:8px 12px;border-radius:999px;font-size:12px;cursor:pointer}
    .badge{display:inline-flex;align-items:center;border:1px solid var(--primary);padding:2px 8px;border-radius:999px;font:700 10px/1.6 system-ui;letter-spacing:.08em}
    .badge.on{background:var(--primary);color:#111}
    .range{height:6px;width:120px;display:inline-flex;align-items:center}.range input{width:100%}
    @media (max-width:1024px){
      .links{width:100%;gap:12px}
      .range{order:3;width:min(280px,70vw)}
      #btnStorm{order:1}
      #badge{order:2}
    }
    @media (max-width:768px){ .range{width:min(260px,75vw)} }
    .hero{position:relative;z-index:2;padding:0 0 48px 0}
    .panel{overflow:hidden;border:1px solid rgba(var(--p),.3);border-radius:24px;background:rgba(0,0,0,.3);box-shadow:inset 0 0 0 1px rgba(var(--p),.15),0 0 28px rgba(var(--p),.2)}
    .panel .video-wrap{position:relative;height:400px;transform:scale(1);transform-origin:50% 50%;will-change:transform;transition:transform 1.25s cubic-bezier(.22,1,.28,1);backface-visibility:hidden}
    .video-layer{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transform:translateZ(0)}
    .panel.zoom .video-wrap{transform:scale(1.75)}
    .video-overlay{position:absolute;inset:0;opacity:0;transition:opacity .55s ease;pointer-events:none}
    .video-overlay.show{opacity:1}
    .panel .vignette{position:absolute;inset:0;pointer-events:none;background:radial-gradient(110% 80% at 50% 50%, rgba(0,0,0,0) 0%, rgba(0,0,0,.15) 60%, rgba(0,0,0,.35) 100%)}
    .panel .glow{position:absolute;inset:0;pointer-events:none;transition:box-shadow .5s}
    .panel:hover .glow{box-shadow:inset 0 0 0 2px rgba(var(--p),.4),0 0 28px rgba(var(--p),.35)}
    .h1{font-weight:900;letter-spacing:-.02em;margin:24px 0 0;font-size:42px;line-height:1.1}
    @media (min-width:900px){.h1{font-size:64px}}
    .muted{color:var(--muted)}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:24px}
    .primary{background:var(--primary);color:#111;border-radius:16px;padding:12px 20px;display:inline-flex;align-items:center;gap:8px;font-weight:600}
    .ghost{border:1px solid var(--primary);border-radius:16px;padding:12px 20px}
    .work{padding:0 0 72px}
    .grid{display:grid;gap:16px}
    @media (min-width:720px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (min-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    .card{position:relative;overflow:hidden;border:1px solid rgba(var(--p),.3);border-radius:18px;background:rgba(0,0,0,.3);box-shadow:inset 0 0 0 1px rgba(var(--p),.15),0 0 18px rgba(var(--p),.2);transition:transform .35s ease}
    .card:hover{transform:translateY(-2px)}
    .card::before{content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(75deg, transparent 0%, rgba(255,255,255,.03) 40%, rgba(255,255,255,.16) 50%, rgba(255,255,255,.03) 60%, transparent 100%);transform:translateX(-150%) skewX(-10deg);opacity:0}
    .card:hover::before{opacity:1;animation:lightsweep 1.2s cubic-bezier(.22,1,.36,1)}
    @keyframes lightsweep{from{transform:translateX(-160%) skewX(-10deg)}to{transform:translateX(220%) skewX(-10deg)}}
    .card-media{aspect-ratio:4/3;background:linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%);background-size:cover;background-position:center;background-repeat:no-repeat filter: grayscale(1) saturate(0) brightness(0.7); transition: filter .45s ease, transform .35s ease; }
    .card h3{margin:8px 0 0;font-size:18px}
    .card .tag{font-size:13px;color:var(--primary)}
    .card .body{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:end;padding:12px}
    .footer{border-top:1px solid var(--border);color:rgba(255,255,255,.7);padding:24px 0;font-size:14px}
    .modal{position:fixed;inset:0;z-index:60;display:none}
    .modal.open{display:block}
    .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(3px);opacity:0;transition:opacity .35s}
    .modal.open .backdrop{opacity:1}
    .sheet{position:absolute;left:50%;top:8vh;transform:translate(-50%,0);width:92vw;max-width:1100px;border:1px solid rgba(var(--p),.4);background:rgba(0,0,0,.8);border-radius:22px;overflow:hidden;box-shadow:0 20px 80px rgba(0,0,0,.6)}
    .sheet-inner{display:grid;gap:16px;padding:16px}
    @media(min-width:900px){.sheet-inner{grid-template-columns:3fr 2fr}}
    .thumbs{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
    .aspect-video{aspect-ratio:16/9}
    .aspect-4-3{aspect-ratio:4/3}
    .btn-close{border:1px solid var(--primary);color:var(--primary);background:transparent;padding:10px 14px;border-radius:12px;cursor:pointer}
  
    .card:hover .card-media,
    .card:focus-within .card-media,
    .card:active .card-media{ filter: none; }
    
    /* === Enforce grayscale on cards, color on hover === */
    .grid .card .card-media {
      filter: grayscale(1) saturate(0) brightness(0.65) !important;
      transition: filter .45s ease, transform .35s ease;
    }
    .grid .card:hover .card-media,
    .grid .card:focus-within .card-media,
    .grid .card:active .card-media {
      filter: none !important;
    }
    @media (hover: none) and (pointer: coarse) {
      /* On touch, keep grayscale until tap/active */
      .grid .card .card-media { transition-duration: .35s; }
    }
    
  
    /* Mobile tap-gate: first tap only reveals color */
    @media (hover: none) and (pointer: coarse) {
      .grid .card.armed .card-media { filter: none !important; }
    }

</style>
</head>
<body>
  <div class="texture"></div>
  <div class="spot" id="spot"></div>

  <header class="nav">
    <div class="container nav-row">
      <div class="brand">
        <div class="brand-spin"><div class="spin"></div></div>
        <div style="font-weight:700; letter-spacing:.02em">BELITZMEDIA</div>
      </div>
      <div class="links">
        <a class="link" href="#work">Work</a>
        <a class="link" href="#contact">Contact</a>
        <button id="btnStorm" class="btn">
          <svg id="icoVol" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9v6h4l5 4V5l-5 4H6z"/></svg>
          <span style="letter-spacing:.08em;text-transform:uppercase">Storm</span>
        </button>
        <span id="badge" class="badge">OFF</span>
        <div class="range"><input id="volume" type="range" min="0" max="100" value="60"></div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div id="heroPanel" class="panel">
          <div class="video-wrap" id="heroVideoWrap">
            <video id="videoBase" class="video-layer" autoplay muted playsinline loop preload="auto"
              src="https://video.wixstatic.com/video/87dcf7_97cef957558045dd8f28a3295cdc443c/1080p/mp4/file.mp4"></video>
            <video id="videoHover" class="video-layer video-overlay" autoplay muted playsinline loop preload="auto"
              src="https://video.wixstatic.com/video/87dcf7_e2b871f973424f63b87abafd34a2d65b/1080p/mp4/file.mp4"></video>
            <div class="vignette"></div>
            <div class="glow"></div>
          </div>
        </div>
        <h1 class="h1">Cutting‑Edge Creative &<br>High‑Impact Editing</h1>
        <p class="muted" style="max-width:680px">Belitzmedia baut dir die Show, die hängen bleibt: kompromissloses Editing, starke Markeninszenierung, schnelles Storytelling.</p>
        <div class="cta">
          <a href="#" id="btnReel" class="primary">Showreel ansehen
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#111"><path d="M7 17L17 7M8 7h9v9"/></svg>
          </a>
          <a id="contact" href="mailto:hello@belitz.media" class="ghost">hello@belitz.media</a>
        </div>
      </div>
    </section>

    <section id="work" class="work">
      <div class="container">
        <h2 style="font-size:28px; margin:0 0 16px; font-weight:700">Selected Work</h2>
        <div class="grid" id="workGrid">
          <!-- 1 Mall of Berlin -->
          <a href="#" class="card" data-title="Mall of Berlin" data-tag="Editor" data-images="https://static.wixstatic.com/media/87dcf7_b32297b71b8c4cf4856f8104ebcf1ee9~mv2.png|https://static.wixstatic.com/media/87dcf7_5e40ce15622d4bee8360a46c6735c7eb~mv2.png|https://static.wixstatic.com/media/87dcf7_f27b769ed1c84b6bad67d1f1d274bdbf~mv2.png|https://static.wixstatic.com/media/87dcf7_5c060a178705477aaaa0fa5cd555ae66~mv2.png">
            <div class="card-media" style="background-image:
              linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%),
              url('https://static.wixstatic.com/media/87dcf7_b32297b71b8c4cf4856f8104ebcf1ee9~mv2.png');"></div>
            <div class="body"><div class="tag">Editor</div><h3>Mall of Berlin</h3></div>
          </a>
          <!-- 2 SugarGang -->
          <a href="#" class="card" data-title="SugarGang" data-tag="Cut und Edit" data-images="https://static.wixstatic.com/media/87dcf7_f65cd8ebb32b4c0abf7acc46ade03775~mv2.png|https://static.wixstatic.com/media/87dcf7_92741b9c58a34b8a88e3cc3f626b1064~mv2.png|https://static.wixstatic.com/media/87dcf7_1ef577fba8b1412db3d9966e3d7dd87d~mv2.png|https://static.wixstatic.com/media/87dcf7_89fcb244ddfe42b7a4b475b5beaa951e~mv2.png">
            <div class="card-media" style="background-image:
              linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%),
              url('https://static.wixstatic.com/media/87dcf7_8c29bd0efdda445e804be9c380b14e39~mv2.png');"></div>
            <div class="body"><div class="tag">Cut und Edit</div><h3>SugarGang</h3></div>
          </a>
          <!-- 3 SPD Gütersloh -->
          <a href="#" class="card" data-title="SPD Gütersloh" data-tag="Imagefilme & Reels" data-images="https://static.wixstatic.com/media/87dcf7_32f83b38fba645fbb86e512817fbc365~mv2.png|https://static.wixstatic.com/media/87dcf7_a0ac220c842f4ea786346e2d8ac97620~mv2.png|https://static.wixstatic.com/media/87dcf7_c5c5fe6a070843d1a667522a11ed4d1e~mv2.png|https://static.wixstatic.com/media/87dcf7_ca673814a0de418d850476d2661a156b~mv2.png">
            <div class="card-media" style="background-image:
              linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%),
              url('https://static.wixstatic.com/media/87dcf7_a9cc661921464257bc1684794671e342~mv2.png');"></div>
            <div class="body"><div class="tag">Imagefilme & Reels</div><h3>SPD Gütersloh</h3></div>
          </a>
          <!-- 4 Nicflex -->
          <a href="#" class="card" data-title="Nicflex" data-tag="Youtube Video Cut und Edit" data-images="https://static.wixstatic.com/media/87dcf7_6d10d5a1c1044dc386f6260c3fed4a59~mv2.png|https://static.wixstatic.com/media/87dcf7_099614e4fded4e099bd339e43511eadf~mv2.png|https://static.wixstatic.com/media/87dcf7_1f7cabaa1b8f481da29287830c2b154c~mv2.png|https://static.wixstatic.com/media/87dcf7_68deffb1db2f49d58333a5b77f73013c~mv2.png">
            <div class="card-media" style="background-image:
              linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%),
              url('https://static.wixstatic.com/media/87dcf7_8bf41276d9794189abe65626a8b1a64b~mv2.png');"></div>
            <div class="body"><div class="tag">Youtube Video Cut und Edit</div><h3>Nicflex</h3></div>
          </a>
          <!-- 5 VegaHappy -->
          <a href="#" class="card" data-title="VegaHappy" data-tag="Tutorials, Reels" data-images="https://static.wixstatic.com/media/87dcf7_eadd3ee8167941da89a04132abd5d489~mv2.png|https://static.wixstatic.com/media/87dcf7_13376cc45d534db687a4762c7554380e~mv2.png|https://static.wixstatic.com/media/87dcf7_1ce3d1e652d344f99dfb9998eb7670fb~mv2.png|https://static.wixstatic.com/media/87dcf7_2c5bc8ffe4104bd1b1d2f48e0d6af85f~mv2.png">
            <div class="card-media" style="background-image:
              linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%),
              url('https://static.wixstatic.com/media/87dcf7_bea3835cdb0b4a2a9a5badfe5b64526f~mv2.png');"></div>
            <div class="body"><div class="tag">Tutorials, Reels</div><h3>VegaHappy</h3></div>
          </a>
          <!-- 6 SpyViral -->
          <a href="#" class="card" data-title="Yajas Smashburger" data-tag="Cut und Edit" data-images="https://static.wixstatic.com/media/87dcf7_06da851fcd724639863356b1a333ab79~mv2.png|https://static.wixstatic.com/media/87dcf7_4cfd97adc8dd4aa49432695bc044f09e~mv2.png|https://static.wixstatic.com/media/87dcf7_f8ff44a880a04759a5219745761267f6~mv2.png|https://static.wixstatic.com/media/87dcf7_424cb083df8c4f838e500123868a7f4e~mv2.png">
            <div class="card-media" style="background-image:
              linear-gradient(135deg, rgba(var(--p), .15), rgba(255,255,255,.06) 50%, #000 100%),
              url('https://static.wixstatic.com/media/87dcf7_198cfc465bdc4b668c73a0df8ba09b90~mv2.png');"></div>
            <div class="body"><div class="tag">Cut und Edit</div><h3>Yajas Smashburger</h3></div>
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap">
      <div>© <span id="year"></span> Belitzmedia. All rights reserved.</div>
      <div style="display:flex;gap:16px"><a href="#">Impressum</a><a href="#">Datenschutz</a></div>
    </div>
  </footer>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="backdrop" id="backdrop"></div>
    <div class="sheet" id="sheet">
      <div class="sheet-inner">
        <div>
          <div class="aspect-video" style="overflow:hidden;border:1px solid var(--border);border-radius:12px;background:rgba(0,0,0,.4)">
            <img id="imgBig" src="" alt="" style="width:100%;height:100%;object-fit:cover;object-position:center">
          </div>
          <div class="thumbs">
            <div class="aspect-4-3" style="overflow:hidden;border:1px solid var(--border);border-radius:10px;background:rgba(0,0,0,.4)"><img id="img1" src="" alt="" style="width:100%;height:100%;object-fit:cover;object-position:center"></div>
            <div class="aspect-4-3" style="overflow:hidden;border:1px solid var(--border);border-radius:10px;background:rgba(0,0,0,.4)"><img id="img2" src="" alt="" style="width:100%;height:100%;object-fit:cover;object-position:center"></div>
            <div class="aspect-4-3" style="overflow:hidden;border:1px solid var(--border);border-radius:10px;background:rgba(0,0,0,.4)"><img id="img3" src="" alt="" style="width:100%;height:100%;object-fit:cover;object-position:center"></div>
          </div>
        </div>
        <div>
          <div id="modalTag" style="color:var(--primary);font-size:14px;margin-bottom:6px"></div>
          <h3 id="modalTitle" style="margin:0 0 10px;font-size:22px"></h3>
          <p class="muted" style="font-size:14px">Case-Beschreibung kommt hierhin. Gib mir deine finalen Texte pro Projekt, ich trag sie dir gern ein.</p>
          <ul class="muted" style="font-size:14px;margin:12px 0 0 18px">
            <li>Format: 9:16, 1:1, 16:9</li>
            <li>Leistungen: Schnitt, Sounddesign, Grading, Titel</li>
            <li>Tools: Premiere Pro, After Effects</li>
          </ul>
          <div style="display:flex;gap:10px;margin-top:16px"><button id="btnClose" class="btn-close">Schließen</button></div>
        
  <!-- Showreel Modal -->
  

</div>
      </div>
    </div>
  </div>
<div id="reelModal" class="modal" aria-hidden="true">
    <div class="backdrop" id="reelBackdrop"></div>
    <div class="sheet" id="reelSheet">
      <div class="sheet-inner">
        <div style="grid-column:1/-1">
          <div class="aspect-video" style="overflow:hidden;border:1px solid var(--border);border-radius:12px;background:rgba(0,0,0,.4)">
            <video id="reelVideo" controls playsinline preload="metadata" style="width:100%;height:100%;object-fit:cover"
              src="https://video.wixstatic.com/video/87dcf7_fe3c5a515fc3435a841121b239c7a407/1080p/mp4/file.mp4"></video>
          </div>
        </div>
        <div style="display:flex;gap:10px;justify-content:flex-end">
          <button id="btnReelClose" class="btn-close">Schließen</button>
        </div>
      </div>
    </div>
  </div>


  <audio id="dry" src="https://static.wixstatic.com/mp3/87dcf7_4e3a43f667cd4de1aaed63a9a3e2d5e5.mp3" preload="none" loop crossorigin="anonymous"></audio>
  <audio id="wet" src="https://static.wixstatic.com/mp3/87dcf7_9df99065b31c4d4897cb37a5c2394c3b.mp3" preload="none" loop crossorigin="anonymous"></audio>

  <script>
    const yearEl = document.getElementById('year'); yearEl.textContent = new Date().getFullYear();

    const spot = document.getElementById('spot');
    window.addEventListener('mousemove', (e)=>{
      spot.style.background = `radial-gradient(520px circle at ${e.clientX}px ${e.clientY}px, rgba(255,212,0,0.18), transparent 60%)`;
    }, {passive:true});

    // Header videos (sync + crossfade) + delayed zoom on container
    const heroPanel = document.getElementById('heroPanel');
    const heroWrap = document.getElementById('heroVideoWrap');
    const videoA = document.getElementById('videoBase');
    const videoB = document.getElementById('videoHover');
    let zoomTimer = null, overlayTimer = null;

    Promise.allSettled([videoA.play(), videoB.play()]).then(()=>{
      setInterval(()=>{
        if (Math.abs(videoA.currentTime - videoB.currentTime) > 0.25) {
          try { videoB.currentTime = videoA.currentTime; } catch(e) {}
        }
      }, 500);
    });

    function showHoverLayer(){
      try { videoB.currentTime = videoA.currentTime; } catch(e){}
      if (videoB.paused) { videoB.play().catch(()=>{}); }
      videoB.classList.add('show');
      if (zoomTimer) clearTimeout(zoomTimer);
      zoomTimer = setTimeout(()=>{ heroPanel.classList.add('zoom'); }, 1000);
    }
    function hideHoverLayer(){
      videoB.classList.remove('show');
      if (zoomTimer) { clearTimeout(zoomTimer); zoomTimer = null; }
      heroPanel.classList.remove('zoom');
      setTimeout(()=>{ try{ videoB.pause(); }catch{} }, 650);
    }
    heroWrap.addEventListener('mouseenter', showHoverLayer);
    heroWrap.addEventListener('mouseleave', hideHoverLayer);
    const coarse = window.matchMedia('(pointer:coarse)').matches;
    const narrow = window.matchMedia('(max-width: 1024px)').matches;
    function scheduleHide(ms){ if (overlayTimer) clearTimeout(overlayTimer); overlayTimer = setTimeout(hideHoverLayer, ms); }
    heroWrap.addEventListener('touchstart', ()=>{ showHoverLayer(); scheduleHide(coarse || narrow ? 3200 : 1400); }, {passive:true});

    // Audio crossfade on scroll
    const btnStorm = document.getElementById('btnStorm');
    const badge = document.getElementById('badge');
    const vol = document.getElementById('volume');
    const dry = document.getElementById('dry');
    const wet = document.getElementById('wet');
    let master = 0.6, audioOn = false;
    function eqPower(r){ r=Math.min(1,Math.max(0,r)); return { dry: Math.cos((Math.PI/2)*r), wet: Math.sin((Math.PI/2)*r) }; }
    function applyVolumes(){ const maxS = Math.max(1, document.body.scrollHeight - innerHeight); const r = Math.min(1, Math.max(0, scrollY / maxS)); const x = eqPower(r); dry.volume = Math.max(0, Math.min(1, x.dry * master)); wet.volume = Math.max(0, Math.min(1, x.wet * master)); }
    let rafScroll = 0; function onScroll(){ if (rafScroll) return; rafScroll = requestAnimationFrame(()=>{ rafScroll = 0; applyVolumes(); }); }
    window.addEventListener('scroll', onScroll, {passive:true});
    vol.addEventListener('input', (e)=>{ master = Math.max(0, Math.min(1, (e.target.value|0)/100 )); applyVolumes(); });
    async function startAudio(){ try{ await Promise.all([ dry.play().catch(()=>{}), wet.play().catch(()=>{}) ]);}catch{} audioOn=true; badge.textContent='ON'; badge.classList.add('on'); applyVolumes(); }
    function stopAudio(){ dry.pause(); wet.pause(); audioOn=false; badge.textContent='OFF'; badge.classList.remove('on'); }
    btnStorm.addEventListener('click', ()=> audioOn ? stopAudio() : startAudio());

    // Modal logic: open any card with its own images via data-attributes
    const modal = document.getElementById('modal');
    const sheet = document.getElementById('sheet');
    const backdrop = document.getElementById('backdrop');
    const btnClose = document.getElementById('btnClose');
    const modalTitle = document.getElementById('modalTitle');
    const modalTag = document.getElementById('modalTag');
    const imgBig = document.getElementById('imgBig');
    const img1 = document.getElementById('img1');
    const img2 = document.getElementById('img2');
    const img3 = document.getElementById('img3');

    function setImages(arr){ imgBig.src=arr[0]||''; img1.src=arr[1]||''; img2.src=arr[2]||''; img3.src=arr[3]||''; }

    function openModalFrom(card){
      // fill content
      modalTitle.textContent = card.dataset.title || card.querySelector('h3')?.textContent || 'Project';
      modalTag.textContent = card.dataset.tag || card.querySelector('.tag')?.textContent || '';
      const arr = (card.dataset.images || '').split('|').filter(Boolean);
      if (arr.length < 4){
        // fallback generic
        const fallback = [
          'https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1600&auto=format&fit=crop',
          'https://images.unsplash.com/photo-1600585154526-990dced4db0d?q=80&w=1200&auto=format&fit=crop',
          'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop',
          'https://images.unsplash.com/photo-1496307639047-41a84b299059?q=80&w=1200&auto=format&fit=crop'
        ];
        setImages(fallback);
      } else {
        setImages(arr);
      }

      // animate open with uniform scale
      modal.classList.add('open');
      document.documentElement.style.overflow='hidden';
      sheet.style.transition='none';
      sheet.style.transform='translate(-50%,0)';
      sheet.style.willChange='transform';

      requestAnimationFrame(()=>{
        const r0 = card.getBoundingClientRect();
        const r1 = sheet.getBoundingClientRect();
        const s = Math.max(.01, r0.width / Math.max(1, r1.width));
        const cx0 = r0.left + r0.width/2, cy0 = r0.top + r0.height/2;
        const cx1 = r1.left + r1.width/2, cy1 = r1.top + r1.height/2;
        const dx = cx0 - cx1, dy = cy0 - cy1;

        sheet.style.transform = `translate(-50%, 0) translate(${dx}px, ${dy}px) scale(${s})`;
        sheet.getBoundingClientRect();
        sheet.style.transition = 'transform 780ms cubic-bezier(.22,1,.28,1)';
        sheet.style.transform = 'translate(-50%, 0) translate(0,0) scale(1)';
      });
    }

    function closeModal(){
      // animate back to the last clicked card
      const last = window.__lastCard;
      const r0 = last ? last.getBoundingClientRect() : null;
      const r1 = sheet.getBoundingClientRect();
      if (r0){
        const s = Math.max(.01, r0.width / Math.max(1, r1.width));
        const cx0 = r0.left + r0.width/2, cy0 = r0.top + r0.height/2;
        const cx1 = r1.left + r1.width/2, cy1 = r1.top + r1.height/2;
        const dx = cx0 - cx1, dy = cy0 - cy1;
        sheet.style.transition = 'transform 780ms cubic-bezier(.22,1,.28,1)';
        sheet.style.transform = `translate(-50%, 0) translate(${dx}px, ${dy}px) scale(${s})`;
        sheet.addEventListener('transitionend', handleEnd, {once:true});
      } else {
        handleEnd();
      }
      function handleEnd(){
        modal.classList.remove('open');
        sheet.style.transform='translate(-50%,0)'; sheet.style.transition=''; sheet.style.willChange='';
        document.documentElement.style.overflow='';
      }
    }

    // Delegate clicks to all cards
    
    (function(){
      const workGrid = document.getElementById('workGrid');
      if (!workGrid) return;
      const isCoarse = window.matchMedia('(pointer:coarse)').matches;
      let armedCard = null;
      let armTimer = null;
      function disarm(){
        if (armedCard){ armedCard.classList.remove('armed'); armedCard = null; }
        if (armTimer){ clearTimeout(armTimer); armTimer = null; }
      }
      function arm(card){
        if (armedCard === card){
          // already armed; next click will open
          return;
        }
        if (armedCard) disarm();
        armedCard = card;
        card.classList.add('armed');
        armTimer = setTimeout(disarm, 3000); // auto-reset after 3s
      }
      // Click outside cards disarms (capture to run before grid handler)
      document.addEventListener('click', (ev)=>{
        if (!isCoarse) return;
        const c = ev.target.closest('.card');
        if (!c) disarm();
      }, true);

      workGrid.addEventListener('click', (e)=>{
        const card = e.target.closest('.card');
        if (!card) return;
        if (isCoarse){
          if (!card.classList.contains('armed')){
            // first tap: reveal color only
            e.preventDefault();
            arm(card);
            return;
          } else {
            // second tap within window: open modal
            e.preventDefault();
            window.__lastCard = card;
            disarm();
            openModalFrom(card);
            return;
          }
        }
        // desktop: open immediately
        e.preventDefault();
        window.__lastCard = card;
        openModalFrom(card);
      });
    })();

    backdrop.addEventListener('click', closeModal);
    btnClose.addEventListener('click', closeModal);
  
    // === Showreel Modal ===
    const btnReel = document.getElementById('btnReel');
    const reelModal = document.getElementById('reelModal');
    const reelSheet = document.getElementById('reelSheet');
    const reelBackdrop = document.getElementById('reelBackdrop');
    const btnReelClose = document.getElementById('btnReelClose');
    const reelVideo = document.getElementById('reelVideo');
    let resumeAudio = false;

    function openReel(){
      // remember audio state and stop BGM
      resumeAudio = (typeof audioOn !== 'undefined' && audioOn) || (!dry.paused || !wet.paused);
      try { stopAudio(); } catch(e) { 
        try { dry.pause(); wet.pause(); } catch(_) {}
      }

      // show modal and FLIP open from button
      reelModal.classList.add('open');
      document.documentElement.style.overflow='hidden';
      reelSheet.style.transition='none';
      reelSheet.style.transform='translate(-50%,0)';
      reelSheet.style.willChange='transform';

      requestAnimationFrame(()=>{
        const r0 = btnReel.getBoundingClientRect();
        const r1 = reelSheet.getBoundingClientRect();
        const s = Math.max(.01, r0.width / Math.max(1, r1.width));
        const cx0 = r0.left + r0.width/2, cy0 = r0.top + r0.height/2;
        const cx1 = r1.left + r1.width/2, cy1 = r1.top + r1.height/2;
        const dx = cx0 - cx1, dy = cy0 - cy1;

        reelSheet.style.transform = `translate(-50%, 0) translate(${dx}px, ${dy}px) scale(${s})`;
        reelSheet.getBoundingClientRect();
        reelSheet.style.transition = 'transform 780ms cubic-bezier(.22,1,.28,1)';
        reelSheet.style.transform = 'translate(-50%, 0) translate(0,0) scale(1)';
      });

      // start playback (should be allowed after user click)
      try { reelVideo.currentTime = 0; } catch{}
      reelVideo.muted = false;
      reelVideo.play().catch(()=>{});
    }

    function closeReel(){
      // animate back to button
      const r0 = btnReel.getBoundingClientRect();
      const r1 = reelSheet.getBoundingClientRect();
      const s = Math.max(.01, r0.width / Math.max(1, r1.width));
      const cx0 = r0.left + r0.width/2, cy0 = r0.top + r0.height/2;
      const cx1 = r1.left + r1.width/2, cy1 = r1.top + r1.height/2;
      const dx = cx0 - cx1, dy = cy0 - cy1;
      reelSheet.style.transition = 'transform 780ms cubic-bezier(.22,1,.28,1)';
      reelSheet.style.transform = `translate(-50%, 0) translate(${dx}px, ${dy}px) scale(${s})`;
      reelSheet.addEventListener('transitionend', ()=>{
        reelModal.classList.remove('open');
        reelSheet.style.transform='translate(-50%,0)'; reelSheet.style.transition=''; reelSheet.style.willChange='';
        document.documentElement.style.overflow='';
      }, {once:true});

      // stop video
      try { reelVideo.pause(); } catch{}

      // resume BGM if it was on
      if (resumeAudio){
        try { startAudio(); } catch(e) {
          try { dry.play(); wet.play(); } catch(_){}
        }
      }
    }

    btnReel?.addEventListener('click', (e)=>{ e.preventDefault(); openReel(); });
    reelBackdrop?.addEventListener('click', closeReel);
    btnReelClose?.addEventListener('click', closeReel);
</script>
</body>
</html>
